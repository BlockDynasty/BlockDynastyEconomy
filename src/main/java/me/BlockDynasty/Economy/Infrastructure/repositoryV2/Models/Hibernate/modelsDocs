-- 1. Accounts
CREATE TABLE account (
  id           SERIAL PRIMARY KEY,
  uuid         VARCHAR(60)NOT NULL UNIQUE,
  nickname     TEXT     NOT NULL,
  is_active    BOOLEAN  NOT NULL DEFAULT TRUE
);

-- 2. Wallets
CREATE TABLE wallet (
  id           SERIAL PRIMARY KEY,
  account_id   INT      NOT NULL UNIQUE
                        REFERENCES account(id)
                        ON DELETE CASCADE
);

-- 3. Currencies
CREATE TABLE currency (
  id           SERIAL PRIMARY KEY,
  uuid         VARCHAR(60)     NOT NULL UNIQUE,
  name         TEXT     NOT NULL,
  symbol       TEXT     -- p.ej. “$”, “€”, “GEM”
);

-- 4. Balances
CREATE TABLE balance (
  wallet_id    INT      NOT NULL
                        REFERENCES wallet(id)
                        ON DELETE CASCADE,
  currency_id  INT      NOT NULL
                        REFERENCES currency(id),
  amount       NUMERIC(18,6) NOT NULL DEFAULT 0,
  PRIMARY KEY (wallet_id, currency_id)
);